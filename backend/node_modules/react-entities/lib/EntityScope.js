"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports["default"] = exports.EntityScope = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _react = _interopRequireWildcard(require("react"));

var _createEntity = require("./createEntity");

var _EntityContext = _interopRequireDefault(require("./EntityContext"));

var EntityScope = function EntityScope(_ref) {
  var entities = _ref.entities,
      children = _ref.children;
  var inheritedEntities = (0, _react.useContext)(_EntityContext["default"]);
  var instances = (0, _extends2["default"])({}, inheritedEntities);

  for (var k in entities) {
    var item = entities[k];
    var entity = item instanceof Array ? item[0] : item;
    var deps = item instanceof Array ? item[1] : undefined;
    instances[k] = (0, _createEntity.createEntity)(entity, deps);
  }

  return /*#__PURE__*/_react["default"].createElement(_EntityContext["default"].Provider, {
    value: instances
  }, children);
};

exports.EntityScope = EntityScope;
var _default = EntityScope;
exports["default"] = _default;